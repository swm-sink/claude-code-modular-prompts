/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pytest_benchmark/logger.py:39: PytestBenchmarkWarning: Benchmarks are automatically disabled because xdist plugin is active.Benchmarks cannot be performed reliably in a parallelized environment.
  warner(PytestBenchmarkWarning(text))
============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.9.0, asyncio-1.1.0, xdist-3.8.0, cov-6.2.1, mock-3.14.1, benchmark-5.1.0, langsmith-0.4.8, Faker-37.4.2
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
created: 16/16 workers
16 workers [202 items]

............s..F....Fs......E...E...F..FFE.............F..F..E.....FE.E. [ 35%]
..FF..F.F..FFF.FFFFF...FFF.FF...EF...EEEFFFFFFEFEFEEFEEE..FEFEEEF.F.EFFF [ 71%]
F....FFFEF..E..EEEFEFFEFFFFE.EEEFEEEFEFFF..FFFFEF.FFFFFFFF               [100%]
==================================== ERRORS ====================================
_ ERROR at setup of TestAPIKeyRotatorEdgeCases.test_network_failure_during_rotation _
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py, line 420
      def test_network_failure_during_rotation(self, temp_config_dir):
E       fixture 'temp_config_dir' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:420
_ ERROR at setup of TestAPIKeyRotatorEdgeCases.test_partial_rotation_recovery __
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py, line 434
      def test_partial_rotation_recovery(self, temp_config_dir):
E       fixture 'temp_config_dir' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:434
_ ERROR at setup of TestAPIKeyRotatorEdgeCases.test_corrupted_backup_handling __
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py, line 452
      def test_corrupted_backup_handling(self, temp_config_dir):
E       fixture 'temp_config_dir' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:452
__ ERROR at setup of TestMCPServerUtilities.test_server_startup_and_shutdown ___
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server.py, line 344
      @pytest.mark.asyncio
      async def test_server_startup_and_shutdown(self, mock_mcp_server):
          """Test server startup and shutdown procedures."""
          with patch('mcp_server.stdio_server') as mock_stdio:
              # Mock stdio_server context manager
              mock_stdio.return_value.__aenter__ = AsyncMock()
              mock_stdio.return_value.__aexit__ = AsyncMock()

              server = ClaudeCodeMCPServer()

              # Test that server can be created without errors
              assert server is not None
              assert hasattr(server, 'server')
              assert hasattr(server, 'project_root')
E       fixture 'mock_mcp_server' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server.py:344
____ ERROR at setup of TestMCPServerIntegration.test_full_command_workflow _____
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server.py, line 363
      @pytest.mark.asyncio
      async def test_full_command_workflow(self, temp_project_dir, mock_mcp_server):
          """Test a complete command discovery and execution workflow."""
          server = ClaudeCodeMCPServer(str(temp_project_dir))

          # Mock all the methods in the workflow
          with patch.object(server, '_discover_resources') as mock_discover, \
               patch.object(server, '_list_commands') as mock_list, \
               patch.object(server, '_get_command_info') as mock_info, \
               patch.object(server, '_execute_command') as mock_execute:

              # Setup mock returns
              mock_discover.return_value = [
                  Mock(uri="command://core/task", name="task")
              ]
              mock_list.return_value = [
                  {"name": "task", "category": "core"}
              ]
              mock_info.return_value = {
                  "name": "task",
                  "description": "Execute a task"
              }
              mock_execute.return_value = {"status": "success"}

              # Execute workflow
              resources = await server._discover_resources()
              commands = await server._list_commands()
              info = await server._get_command_info("task")
              result = await server._execute_command("task", {"test": "arg"})

              # Verify workflow
              assert len(resources) == 1
              assert len(commands) == 1
              assert info["name"] == "task"
              assert result["status"] == "success"
E       fixture 'temp_project_dir' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server.py:363
_ ERROR at setup of TestMCPServerIntegration.test_error_propagation_in_workflow _
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server.py, line 399
      @pytest.mark.asyncio
      async def test_error_propagation_in_workflow(self, temp_project_dir, mock_mcp_server):
          """Test that errors are properly propagated through the workflow."""
          server = ClaudeCodeMCPServer(str(temp_project_dir))

          # Test error in resource discovery
          with patch.object(server, '_discover_resources') as mock_discover:
              mock_discover.side_effect = IOError("File system error")

              with pytest.raises(IOError):
                  await server._discover_resources()

          # Test error in command execution
          with patch.object(server, '_execute_command') as mock_execute:
              mock_execute.side_effect = RuntimeError("Execution failed")

              with pytest.raises(RuntimeError):
                  await server._execute_command("task", {})
E       fixture 'temp_project_dir' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server.py:399
___ ERROR at setup of TestSecureAPIKeyManager.test_retrieve_api_key_success ____
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:39: in temp_dir
    old_cwd = os.getcwd()
              ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
___ ERROR at setup of TestSecureAPIKeyManager.test_delete_api_key_not_found ____
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:39: in temp_dir
    old_cwd = os.getcwd()
              ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManager.test_encryption_decryption_roundtrip _
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:39: in temp_dir
    old_cwd = os.getcwd()
              ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerEdgeCases.test_file_permission_errors _
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py, line 385
      def test_file_permission_errors(self, mock_environment):
E       fixture 'mock_environment' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:385
_____ ERROR at setup of TestSecureAPIKeyManager.test_master_key_validation _____
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:39: in temp_dir
    old_cwd = os.getcwd()
              ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerTDD.test_manager_uses_environment_master_key _
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:37: in temp_dir
    original_cwd = os.getcwd()
                   ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestAPIKeyRotatorEdgeCases.test_concurrent_rotation_prevention _
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py, line 401
      def test_concurrent_rotation_prevention(self, temp_config_dir):
E       fixture 'temp_config_dir' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:401
___ ERROR at setup of TestSecureAPIKeyManager.test_concurrent_access_safety ____
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:39: in temp_dir
    old_cwd = os.getcwd()
              ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerEdgeCases.test_memory_pressure_handling _
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py, line 418
      def test_memory_pressure_handling(self, temp_dir, mock_environment):
E       fixture 'mock_environment' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:418
_ ERROR at setup of TestSecureAPIKeyManagerTDD.test_manager_generates_master_key_when_missing _
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:37: in temp_dir
    original_cwd = os.getcwd()
                   ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerTDD.test_encrypt_api_key_stores_encrypted_data _
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:37: in temp_dir
    original_cwd = os.getcwd()
                   ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerTDD.test_rotate_api_key_creates_new_key _
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:37: in temp_dir
    original_cwd = os.getcwd()
                   ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerEdgeCases.test_disk_space_full_simulation _
[gw3] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py, line 406
      def test_disk_space_full_simulation(self, temp_dir, mock_environment):
E       fixture 'mock_environment' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:406
_ ERROR at setup of TestSecureAPIKeyManagerTDD.test_export_keys_for_backup_without_keys _
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:37: in temp_dir
    original_cwd = os.getcwd()
                   ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerTDD.test_cleanup_expired_keys_removes_old_keys _
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:37: in temp_dir
    original_cwd = os.getcwd()
                   ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecureAPIKeyManagerEdgeCases.test_extremely_long_api_key _
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:383: in manager
    return SecureAPIKeyManager(
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/secure_api_key_manager.py:25: in __init__
    self.cipher_suite = self._setup_encryption()
                        ^^^^^^^^^^^^^^^^^^^^^^^^
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/secure_api_key_manager.py:64: in _setup_encryption
    with open(salt_file, 'wb') as f:
         ^^^^^^^^^^^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory: '.claude_salt'
___ ERROR at setup of TestSecurityAuditor.test_check_configuration_security ____
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:81: in temp_framework_structure
    original_cwd = Path.cwd()
                   ^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_abc.py:746: in cwd
    return cls('').absolute()
           ^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_local.py:649: in absolute
    cwd = os.getcwd()
          ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
__ ERROR at setup of TestSecurityAuditor.test_check_input_validation_failures __
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:81: in temp_framework_structure
    original_cwd = Path.cwd()
                   ^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_abc.py:746: in cwd
    return cls('').absolute()
           ^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_local.py:649: in absolute
    cwd = os.getcwd()
          ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
___ ERROR at setup of TestSecurityAuditorEdgeCases.test_large_file_handling ____
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py, line 546
      def test_large_file_handling(self, temp_framework_structure):
E       fixture 'temp_framework_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:546
__ ERROR at setup of TestSecurityAuditorEdgeCases.test_file_permission_errors __
[gw7] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py, line 528
      def test_file_permission_errors(self, temp_framework_structure):
E       fixture 'temp_framework_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:528
______ ERROR at setup of TestSecurityAuditor.test_initialization_success _______
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:81: in temp_framework_structure
    original_cwd = Path.cwd()
                   ^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_abc.py:746: in cwd
    return cls('').absolute()
           ^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_local.py:649: in absolute
    cwd = os.getcwd()
          ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
____ ERROR at setup of TestSecurityAuditor.test_check_injection_prevention _____
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:81: in temp_framework_structure
    original_cwd = Path.cwd()
                   ^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_abc.py:746: in cwd
    return cls('').absolute()
           ^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_local.py:649: in absolute
    cwd = os.getcwd()
          ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestSecurityAuditorEdgeCases.test_concurrent_audit_execution _
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py, line 590
      def test_concurrent_audit_execution(self, temp_framework_structure):
E       fixture 'temp_framework_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:590
_ ERROR at setup of TestCommandSimplifierUtilities.test_file_extension_handling _
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py, line 473
      def test_file_extension_handling(self, temp_project_structure):
E       fixture 'temp_project_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:473
_ ERROR at setup of TestSecurityAuditorEdgeCases.test_malformed_configuration_files _
[gw6] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py, line 566
      def test_malformed_configuration_files(self, temp_framework_structure):
E       fixture 'temp_framework_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:566
_ ERROR at setup of TestCommandSimplifierUtilities.test_circular_component_detection _
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py, line 496
      def test_circular_component_detection(self, temp_project_structure):
E       fixture 'temp_project_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:496
______ ERROR at setup of TestSecurityAuditor.test_check_logging_security _______
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:81: in temp_framework_structure
    original_cwd = Path.cwd()
                   ^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_abc.py:746: in cwd
    return cls('').absolute()
           ^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_local.py:649: in absolute
    cwd = os.getcwd()
          ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
__ ERROR at setup of TestSecurityAuditorIntegration.test_full_audit_workflow ___
[gw5] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py, line 626
      def test_full_audit_workflow(self, temp_framework_structure):
E       fixture 'temp_framework_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:626
_ ERROR at setup of TestCommandSimplifierUtilities.test_memory_efficient_processing _
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py, line 515
      def test_memory_efficient_processing(self, temp_project_structure):
E       fixture 'temp_project_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:515
_ ERROR at setup of TestSecurityAuditor.test_check_dependencies_vulnerabilities _
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:81: in temp_framework_structure
    original_cwd = Path.cwd()
                   ^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_abc.py:746: in cwd
    return cls('').absolute()
           ^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pathlib/_local.py:649: in absolute
    cwd = os.getcwd()
          ^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory
_ ERROR at setup of TestCommandSimplifierUtilities.test_concurrent_processing_safety _
[gw6] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py, line 536
      def test_concurrent_processing_safety(self, temp_project_structure):
E       fixture 'temp_project_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:536
_ ERROR at setup of TestSecurityAuditorIntegration.test_audit_with_real_security_issues _
[gw2] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
file /Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py, line 652
      def test_audit_with_real_security_issues(self, temp_framework_structure):
E       fixture 'temp_framework_structure' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_project_root, mock_security_auditor, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, temp_dir, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:652
=================================== FAILURES ===================================
___________ TestConstitutionalAISafety.test_harmlessness_validation ____________
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_constitutional_ai_safety.py:42: in test_harmlessness_validation
    self.assertTrue(found_safety_check, "No safety check patterns found")
E   AssertionError: False is not true : No safety check patterns found
_________ TestEndToEndWorkflows.test_performance_optimization_workflow _________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/e2e/test_end_to_end_workflows.py:153: in test_performance_optimization_workflow
    self.assertTrue(workflow_valid, "Performance optimization workflow incomplete")
E   AssertionError: False is not true : Performance optimization workflow incomplete
_____________ TestConstitutionalAISafety.test_helpfulness_balance ______________
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_constitutional_ai_safety.py:68: in test_helpfulness_balance
    self.assertTrue(found_balance, "No balance mechanism found between safety and helpfulness")
E   AssertionError: False is not true : No balance mechanism found between safety and helpfulness
_ TestCommandSimplifierFunctional.test_command_simplifier_basic_functionality __
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_functional_coverage.py:293: in test_command_simplifier_basic_functionality
    assert hasattr(simplifier, 'component_cache')
E   AssertionError: assert False
E    +  where False = hasattr(<simplify_commands.CommandSimplifier object at 0x10c748980>, 'component_cache')
___________ TestEndToEndWorkflows.test_constitutional_ai_integration ___________
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/e2e/test_end_to_end_workflows.py:208: in test_constitutional_ai_integration
    self.assertGreaterEqual(integration_rate, 0.7,
E   AssertionError: 0.125 not greater than or equal to 0.7 : Only 12.5% of files integrate constitutional AI
___________ TestClaudeCodeMCPServer.test_discover_resources_success ____________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server.py:134: in test_discover_resources_success
    assert resources[0].name == "task"
E   AssertionError: assert <Mock name='task.name' id='4533300464'> == 'task'
E    +  where <Mock name='task.name' id='4533300464'> = <Mock name='task' id='4533299792'>.name
______________ TestMCPServerUtilities.test_logging_configuration _______________
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server.py:342: in test_logging_configuration
    assert root_logger.level <= logging.INFO
E   AssertionError: assert 30 <= 20
E    +  where 30 = <RootLogger root (WARNING)>.level
E    +  and   20 = <module 'logging' from '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py'>.INFO
____ TestConstitutionalAISafety.test_constitutional_compliance_in_commands _____
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_constitutional_ai_safety.py:108: in test_constitutional_compliance_in_commands
    self.assertGreaterEqual(safety_ratio, 0.8,
E   AssertionError: 0.1 not greater than or equal to 0.8 : Only 10.0% of commands include constitutional safety
____________ TestMCPServerTDD.test_get_command_info_returns_details ____________
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:248: in test_get_command_info_returns_details
    assert "test command for unit testing" in result.lower()
E   assert 'test command for unit testing' in '{\n  "error": "command \'/test-command\' not found"\n}'
E    +  where '{\n  "error": "command \'/test-command\' not found"\n}' = <built-in method lower of str object at 0x12028fb40>()
E    +    where <built-in method lower of str object at 0x12028fb40> = '{\n  "error": "Command \'/test-command\' not found"\n}'.lower
____ TestMCPServerTDD.test_discover_resources_finds_commands_and_components ____
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server_tdd.py:122: in test_discover_resources_finds_commands_and_components
    command_resources = [r for r in resources if "commands" in r.uri]
                                                 ^^^^^^^^^^^^^^^^^^^
E   TypeError: argument of type 'AnyUrl' is not iterable
_____ TestMCPServerTDD.test_discover_components_processes_component_files ______
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:197: in test_discover_components_processes_component_files
    if "test-component" in resource.uri:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: argument of type 'AnyUrl' is not iterable
________ TestMCPServerTDD.test_server_uses_cwd_as_default_project_root _________
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:109: in test_server_uses_cwd_as_default_project_root
    assert server.project_root == temp_path
E   AssertionError: assert PosixPath('/private/var/folders/xp/mqn8k3p11ssg22719j31vqhr0000gp/T/tmp3g2vr60v') == PosixPath('/var/folders/xp/mqn8k3p11ssg22719j31vqhr0000gp/T/tmp3g2vr60v')
E    +  where PosixPath('/private/var/folders/xp/mqn8k3p11ssg22719j31vqhr0000gp/T/tmp3g2vr60v') = <mcp_server.ClaudeCodeMCPServer object at 0x107bba5d0>.project_root
__ TestMCPServerEdgeCases.test_extract_metadata_handles_malformed_frontmatter __
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:349: in test_extract_metadata_handles_malformed_frontmatter
    assert 'name' in metadata
E   AssertionError: assert 'name' in {}
______________ TestAPIKeyRotator.test_load_configuration_success _______________
[gw2] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:106: in test_load_configuration_success
    with patch.object(rotator, 'load_configuration') as mock_load:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x1140fa0d0> does not have the attribute 'load_configuration'
_____________ TestMCPServerTDD.test_extract_examples_from_content ______________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:281: in test_extract_examples_from_content
    assert examples[0]['code'] == '/command arg1 arg2'
           ^^^^^^^^^^^^^^^^^^^
E   KeyError: 'code'
________________ TestScriptsModules.test_security_audit_import _________________
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_actual_modules.py:143: in test_security_audit_import
    assert hasattr(auditor, 'security_issues')
E   AssertionError: assert False
E    +  where False = hasattr(<security_audit.SecurityAuditor object at 0x111c48590>, 'security_issues')
_______ TestMCPServerTDD.test_discover_commands_processes_markdown_files _______
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_mcp_server_tdd.py:148: in test_discover_commands_processes_markdown_files
    if "test-command" in resource.uri:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: argument of type 'AnyUrl' is not iterable
_______ TestMCPServerTDD.test_extract_command_metadata_from_frontmatter ________
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:167: in test_extract_command_metadata_from_frontmatter
    assert metadata['category'] == 'core'
           ^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'category'
_____________ TestMCPServerTDD.test_execute_command_list_commands ______________
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:227: in test_execute_command_list_commands
    assert "Available Commands" in result
E   assert 'Available Commands' in '{\n  "command": "list-commands",\n  "arguments": {},\n  "status": "executed",\n  "timestamp": "2025-07-23T02:02:28.558691",\n  "message": "Command \'list-commands\' executed successfully with MCP server"\n}'
____________ TestAPIKeyRotator.test_key_validation_before_rotation _____________
[gw7] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:276: in test_key_validation_before_rotation
    with patch.object(rotator, 'validate_key') as mock_validate:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x114065160> does not have the attribute 'validate_key'
________________ TestAPIKeyRotator.test_emergency_key_rotation _________________
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:348: in test_emergency_key_rotation
    with patch.object(rotator, 'emergency_rotate') as mock_emergency:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x111449160> does not have the attribute 'emergency_rotate'
______________ TestAPIKeyRotator.test_key_restoration_from_backup ______________
[gw5] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:223: in test_key_restoration_from_backup
    with patch.object(rotator, 'restore_from_backup') as mock_restore:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x12360b250> does not have the attribute 'restore_from_backup'
__________________ TestAPIKeyRotator.test_batch_key_rotation ___________________
[gw3] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:178: in test_batch_key_rotation
    with patch.object(rotator, 'rotate_batch') as mock_batch:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x11ae0afd0> does not have the attribute 'rotate_batch'
___________ TestMCPServerTDD.test_extract_xml_metadata_from_content ____________
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:182: in test_extract_xml_metadata_from_content
    assert metadata['description'] == 'Test description'
           ^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'description'
____________ TestMCPServerIntegration.test_full_resource_discovery _____________
[gw10] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:484: in test_full_resource_discovery
    command_resources = [r for r in resources if "commands" in r.uri]
                                                 ^^^^^^^^^^^^^^^^^^^
E   TypeError: argument of type 'AnyUrl' is not iterable
___________ TestMCPServerTDD.test_read_resource_returns_file_content ___________
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_mcp_server_tdd.py:216: in test_read_resource_returns_file_content
    content = await server._read_resource(uri)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mcp_server.py:359: in _read_resource
    raise ValueError(f"Unknown resource URI scheme: {uri}")
E   ValueError: Unknown resource URI scheme: file://test_resource.md
------------------------------ Captured log call -------------------------------
ERROR    mcp_server:mcp_server.py:379 Error reading resource file://test_resource.md: Unknown resource URI scheme: file://test_resource.md
______________ TestSecureAPIKeyManager.test_store_api_key_success ______________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:129: in test_store_api_key_success
    result = manager.store_api_key("openai", "sk-test-key-123")
             ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key'. Did you mean: 'revoke_api_key'?
____________ TestAPIKeyRotator.test_rotation_rollback_functionality ____________
[gw7] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:300: in test_rotation_rollback_functionality
    with patch.object(rotator, 'rollback_rotation') as mock_rollback:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x113727750> does not have the attribute 'rollback_rotation'
___________ TestAPIKeyRotator.test_load_configuration_file_not_found ___________
[gw2] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:119: in test_load_configuration_file_not_found
    with patch.object(rotator, 'load_configuration') as mock_load:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x1140fa210> does not have the attribute 'load_configuration'
_______ TestSecurityAuditFunctional.test_security_auditor_initialization _______
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_functional_coverage.py:192: in test_security_auditor_initialization
    assert hasattr(auditor, 'security_issues')
E   AssertionError: assert False
E    +  where False = hasattr(<security_audit.SecurityAuditor object at 0x111048590>, 'security_issues')
___________ TestSecureAPIKeyManager.test_retrieve_api_key_not_found ____________
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:155: in test_retrieve_api_key_not_found
    retrieved_key = manager.retrieve_api_key("nonexistent")
                    ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'retrieve_api_key'. Did you mean: 'revoke_api_key'?
_____________ TestSecureAPIKeyManager.test_key_rotation_not_found ______________
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:210: in test_key_rotation_not_found
    result = manager.rotate_api_key("nonexistent", "sk-new-key-456")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/secure_api_key_manager.py:156: in rotate_api_key
    raise ValueError(f"API key {key_id} not found")
E   ValueError: API key nonexistent not found
_____________ TestAPIKeyRotator.test_automatic_rotation_scheduling _____________
[gw5] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:253: in test_automatic_rotation_scheduling
    with patch.object(rotator, 'check_rotation_schedule') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x12360b9d0> does not have the attribute 'check_rotation_schedule'
_____________ TestAPIKeyRotator.test_rotation_notification_system ______________
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:382: in test_rotation_notification_system
    with patch.object(rotator, 'send_notification') as mock_notify:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x1114b0690> does not have the attribute 'send_notification'
________________ TestSecureAPIKeyManager.test_list_stored_keys _________________
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:163: in test_list_stored_keys
    manager.store_api_key("openai", "sk-openai-123")
    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key'. Did you mean: 'revoke_api_key'?
_____________ TestSecureAPIKeyManager.test_delete_api_key_success ______________
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:180: in test_delete_api_key_success
    manager.store_api_key("openai", "sk-test-key-123")
    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key'. Did you mean: 'revoke_api_key'?
_____________ TestSecureAPIKeyManager.test_key_expiration_tracking _____________
[gw3] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:286: in test_key_expiration_tracking
    result = manager.store_api_key_with_expiration("openai", "sk-key-123", expiration)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key_with_expiration'
_________ TestSecureAPIKeyManager.test_master_key_generation_new_file __________
[gw10] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:958: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'print' to have been called once. Called 2 times.
E   Calls: [call('🔑 Generated new master key. Store CLAUDE_MASTER_KEY environment variable securely.'),
E    call('   Master key: generated-master-key')].

During handling of the above exception, another exception occurred:
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:112: in test_master_key_generation_new_file
    mock_print.assert_called_once()
E   AssertionError: Expected 'print' to have been called once. Called 2 times.
E   Calls: [call('🔑 Generated new master key. Store CLAUDE_MASTER_KEY environment variable securely.'),
E    call('   Master key: generated-master-key')].
E   
E   pytest introspection follows:
E   
E   Args:
E   assert ('   Master k...-master-key',) == ()
E     
E     Left contains one more item: '   Master key: generated-master-key'
E     Use -v to get more diff
__________ TestSecureAPIKeyManager.test_encryption_with_invalid_data ___________
[gw5] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:233: in test_encryption_with_invalid_data
    encrypted = manager._encrypt_data(str(12345))
                ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute '_encrypt_data'
__________ TestSecureAPIKeyManager.test_decryption_with_invalid_token __________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:241: in test_decryption_with_invalid_token
    manager._decrypt_data(b"invalid-encrypted-data")
    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute '_decrypt_data'
______________ TestSecureAPIKeyManager.test_key_rotation_success _______________
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:198: in test_key_rotation_success
    manager.store_api_key("openai", "sk-old-key-123")
    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key'. Did you mean: 'revoke_api_key'?
________________ TestAPIKeyRotator.test_rotation_audit_logging _________________
[gw7] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_key_rotation.py:334: in test_rotation_audit_logging
    with patch.object(rotator, 'log_audit_event') as mock_log:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <tallinn.tests.unit.test_key_rotation.APIKeyRotator object at 0x114250690> does not have the attribute 'log_audit_event'
__________ TestSecureAPIKeyManager.test_key_store_corruption_handling __________
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:252: in test_key_store_corruption_handling
    result = manager.retrieve_api_key("any-service")
             ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'retrieve_api_key'. Did you mean: 'revoke_api_key'?
__________ TestSecureAPIKeyManager.test_key_store_backup_and_restore ___________
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:260: in test_key_store_backup_and_restore
    manager.store_api_key("service1", "key1")
    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key'. Did you mean: 'revoke_api_key'?
_____ TestSecureAPIKeyManagerEdgeCases.test_special_characters_in_key_name _____
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_secure_api_key_manager_tdd.py:412: in test_special_characters_in_key_name
    key_id = manager.encrypt_api_key(name, "test-key")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
secure_api_key_manager.py:99: in encrypt_api_key
    key_store = self._load_key_store()
                ^^^^^^^^^^^^^^^^^^^^^^
secure_api_key_manager.py:256: in _load_key_store
    return json.load(f)
           ^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py:293: in load
    return loads(fp.read(),
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py:346: in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py:348: in decode
    raise JSONDecodeError("Extra data", s, end)
E   json.decoder.JSONDecodeError: Extra data: line 26 column 2 (char 19527)
_____________ TestSecureAPIKeyManager.test_security_audit_methods ______________
[gw10] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:302: in test_security_audit_methods
    manager.store_api_key("weak_key", "12345")
    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute 'store_api_key'. Did you mean: 'revoke_api_key'?
_________ TestSecureAPIKeyManager.test_key_derivation_salt_uniqueness __________
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager.py:371: in test_key_derivation_salt_uniqueness
    encrypted1 = manager1._encrypt_data(test_data)
                 ^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecureAPIKeyManager' object has no attribute '_encrypt_data'
________________ TestSecurityAuditor.test_check_auth_mechanisms ________________
[gw3] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:243: in test_check_auth_mechanisms
    with patch.object(auditor, 'check_auth_mechanisms') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x11af4b620> does not have the attribute 'check_auth_mechanisms'
_____________ TestCommandSimplifier.test_batch_conversion_success ______________
[gw7] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:278: in test_batch_conversion_success
    result = simplifier.convert_batch()
             ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CommandSimplifier' object has no attribute 'convert_batch'
___ TestSecureAPIKeyManagerTDD.test_error_handling_with_corrupted_key_store ____
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_secure_api_key_manager_tdd.py:372: in test_error_handling_with_corrupted_key_store
    key_list = manager.list_api_keys()
               ^^^^^^^^^^^^^^^^^^^^^^^
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/secure_api_key_manager.py:195: in list_api_keys
    key_store = self._load_key_store()
                ^^^^^^^^^^^^^^^^^^^^^^
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/secure_api_key_manager.py:256: in _load_key_store
    return json.load(f)
           ^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py:293: in load
    return loads(fp.read(),
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py:346: in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py:345: in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py:363: in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
E   json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
______ TestCommandSimplifier.test_error_handling_during_batch_processing _______
[gw15] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:463: in test_error_handling_during_batch_processing
    result = simplifier.convert_batch()
             ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CommandSimplifier' object has no attribute 'convert_batch'
___________ TestSecurityAuditor.test_run_comprehensive_audit_success ___________
[gw6] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:958: in assert_called_once
    raise AssertionError(msg)
E   AssertionError: Expected 'mock' to have been called once. Called 0 times.

During handling of the above exception, another exception occurred:
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:151: in test_run_comprehensive_audit_success
    getattr(auditor, check_name).assert_called_once()
E   AssertionError: Expected 'mock' to have been called once. Called 0 times.
________________ TestSecurityAuditor.test_check_error_handling _________________
[gw5] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:402: in test_check_error_handling
    with patch.object(auditor, 'check_error_handling') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x1237f4d70> does not have the attribute 'check_error_handling'
__________ TestSecureAPIKeyManagerEdgeCases.test_unicode_in_metadata ___________
[gw0] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_secure_api_key_manager_tdd.py:425: in test_unicode_in_metadata
    key_id = manager.encrypt_api_key("unicode-test", "test-key", metadata)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
secure_api_key_manager.py:99: in encrypt_api_key
    key_store = self._load_key_store()
                ^^^^^^^^^^^^^^^^^^^^^^
secure_api_key_manager.py:256: in _load_key_store
    return json.load(f)
           ^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py:293: in load
    return loads(fp.read(),
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py:346: in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py:348: in decode
    raise JSONDecodeError("Extra data", s, end)
E   json.decoder.JSONDecodeError: Extra data: line 26 column 2 (char 19527)
_____________ TestSecurityAuditor.test_security_report_generation ______________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:486: in test_security_report_generation
    with patch.object(auditor, 'generate_security_report') as mock_report:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x10e34b620> does not have the attribute 'generate_security_report'
___________ TestSecurityAuditor.test_check_sensitive_data_detection ____________
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:166: in test_check_sensitive_data_detection
    with patch.object(auditor, 'check_sensitive_data') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x10794b0e0> does not have the attribute 'check_sensitive_data'
______________ TestSecurityAuditor.test_check_api_key_management _______________
[gw3] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:268: in test_check_api_key_management
    with patch.object(auditor, 'check_api_key_management') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x11afde850> does not have the attribute 'check_api_key_management'
_______________ TestSecurityAuditor.test_check_owasp_compliance ________________
[gw10] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:346: in test_check_owasp_compliance
    with patch.object(auditor, 'check_owasp_compliance') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x10df66660> does not have the attribute 'check_owasp_compliance'
________ TestSecurityAuditorEdgeCases.test_missing_framework_directory _________
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_security_audit.py:516: in test_missing_framework_directory
    with patch.object(auditor, 'check_sensitive_data') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x128765010> does not have the attribute 'check_sensitive_data'
___________ TestSecurityAuditor.test_api_key_rotation_functionality ____________
[gw2] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:457: in test_api_key_rotation_functionality
    with patch.object(auditor, 'rotate_api_keys') as mock_rotate:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x115349160> does not have the attribute 'rotate_api_keys'
____________ TestCommandSimplifier.test_yaml_frontmatter_generation ____________
[gw7] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:323: in test_yaml_frontmatter_generation
    with patch.object(simplifier, '_generate_frontmatter') as mock_frontmatter:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x114252ad0> does not have the attribute '_generate_frontmatter'
___________ TestCommandSimplifier.test_parse_xml_command_invalid_xml ___________
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:167: in test_parse_xml_command_invalid_xml
    with patch.object(simplifier, '_parse_xml_command') as mock_parse:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x111c486e0> does not have the attribute '_parse_xml_command'
____________ TestCommandSimplifier.test_convert_single_file_failure ____________
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:254: in test_convert_single_file_failure
    with patch.object(simplifier, '_convert_file') as mock_convert:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x107c31160> does not have the attribute '_convert_file'
___________ TestSecurityAuditor.test_check_input_validation_success ____________
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_security_audit.py:194: in test_check_input_validation_success
    with patch.object(auditor, 'check_input_validation') as mock_check:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <security_audit.SecurityAuditor object at 0x10864b620> does not have the attribute 'check_input_validation'
_________________ TestCommandSimplifier.test_component_caching _________________
[gw9] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:219: in test_component_caching
    result1 = simplifier._load_component(component_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CommandSimplifier' object has no attribute '_load_component'
______________ TestCommandSimplifier.test_initialization_success _______________
[gw12] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:112: in test_initialization_success
    assert simplifier.components_dir.exists()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CommandSimplifier' object has no attribute 'components_dir'
__________ TestCommandSimplifier.test_batch_conversion_with_failures ___________
[gw8] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:302: in test_batch_conversion_with_failures
    result = simplifier.convert_batch()
             ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CommandSimplifier' object has no attribute 'convert_batch'
______________ TestCommandSimplifier.test_load_component_success _______________
[gw11] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:182: in test_load_component_success
    with patch.object(simplifier, '_load_component') as mock_load:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x107a65d30> does not have the attribute '_load_component'
_____________ TestCommandSimplifier.test_load_component_not_found ______________
[gw1] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
tests/unit/test_simplify_commands.py:200: in test_load_component_not_found
    with patch.object(simplifier, '_load_component') as mock_load:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x10e34ae40> does not have the attribute '_load_component'
____________ TestCommandSimplifier.test_convert_single_file_success ____________
[gw13] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:237: in test_convert_single_file_success
    with patch.object(simplifier, '_convert_file') as mock_convert:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x1110c86e0> does not have the attribute '_convert_file'
_________ TestCommandSimplifier.test_arguments_placeholder_replacement _________
[gw14] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:347: in test_arguments_placeholder_replacement
    with patch.object(simplifier, '_replace_arguments_placeholders') as mock_replace:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x10c7a9bd0> does not have the attribute '_replace_arguments_placeholders'
____________ TestCommandSimplifier.test_generate_conversion_report _____________
[gw4] darwin -- Python 3.13.5 /Library/Frameworks/Python.framework/Versions/3.13/bin/python3
/Users/smenssink/conductor/repo/claude-code-modular-prompts/tallinn/tests/unit/test_simplify_commands.py:402: in test_generate_conversion_report
    with patch.object(simplifier, 'generate_report') as mock_report:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <simplify_commands.CommandSimplifier object at 0x111ca2850> does not have the attribute 'generate_report'
=========================== short test summary info ============================
FAILED tests/unit/test_constitutional_ai_safety.py::TestConstitutionalAISafety::test_harmlessness_validation
FAILED tests/e2e/test_end_to_end_workflows.py::TestEndToEndWorkflows::test_performance_optimization_workflow
FAILED tests/unit/test_constitutional_ai_safety.py::TestConstitutionalAISafety::test_helpfulness_balance
FAILED tests/unit/test_functional_coverage.py::TestCommandSimplifierFunctional::test_command_simplifier_basic_functionality
FAILED tests/e2e/test_end_to_end_workflows.py::TestEndToEndWorkflows::test_constitutional_ai_integration
FAILED tests/unit/test_mcp_server.py::TestClaudeCodeMCPServer::test_discover_resources_success
FAILED tests/unit/test_mcp_server.py::TestMCPServerUtilities::test_logging_configuration
FAILED tests/unit/test_constitutional_ai_safety.py::TestConstitutionalAISafety::test_constitutional_compliance_in_commands
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_get_command_info_returns_details
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_discover_resources_finds_commands_and_components
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_discover_components_processes_component_files
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_server_uses_cwd_as_default_project_root
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerEdgeCases::test_extract_metadata_handles_malformed_frontmatter
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_load_configuration_success
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_extract_examples_from_content
FAILED tests/unit/test_actual_modules.py::TestScriptsModules::test_security_audit_import
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_discover_commands_processes_markdown_files
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_extract_command_metadata_from_frontmatter
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_execute_command_list_commands
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_key_validation_before_rotation
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_emergency_key_rotation
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_key_restoration_from_backup
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_batch_key_rotation
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_extract_xml_metadata_from_content
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerIntegration::test_full_resource_discovery
FAILED tests/unit/test_mcp_server_tdd.py::TestMCPServerTDD::test_read_resource_returns_file_content
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_store_api_key_success
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_rotation_rollback_functionality
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_load_configuration_file_not_found
FAILED tests/unit/test_functional_coverage.py::TestSecurityAuditFunctional::test_security_auditor_initialization
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_retrieve_api_key_not_found
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_key_rotation_not_found
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_automatic_rotation_scheduling
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_rotation_notification_system
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_list_stored_keys
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_delete_api_key_success
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_key_expiration_tracking
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_master_key_generation_new_file
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_encryption_with_invalid_data
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_decryption_with_invalid_token
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_key_rotation_success
FAILED tests/unit/test_key_rotation.py::TestAPIKeyRotator::test_rotation_audit_logging
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_key_store_corruption_handling
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_key_store_backup_and_restore
FAILED tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerEdgeCases::test_special_characters_in_key_name
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_security_audit_methods
FAILED tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_key_derivation_salt_uniqueness
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_auth_mechanisms
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_batch_conversion_success
FAILED tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_error_handling_with_corrupted_key_store
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_error_handling_during_batch_processing
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_run_comprehensive_audit_success
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_error_handling
FAILED tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerEdgeCases::test_unicode_in_metadata
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_security_report_generation
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_sensitive_data_detection
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_api_key_management
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_owasp_compliance
FAILED tests/unit/test_security_audit.py::TestSecurityAuditorEdgeCases::test_missing_framework_directory
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_api_key_rotation_functionality
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_yaml_frontmatter_generation
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_parse_xml_command_invalid_xml
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_convert_single_file_failure
FAILED tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_input_validation_success
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_component_caching
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_initialization_success
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_batch_conversion_with_failures
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_load_component_success
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_load_component_not_found
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_convert_single_file_success
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_arguments_placeholder_replacement
FAILED tests/unit/test_simplify_commands.py::TestCommandSimplifier::test_generate_conversion_report
ERROR tests/unit/test_key_rotation.py::TestAPIKeyRotatorEdgeCases::test_network_failure_during_rotation
ERROR tests/unit/test_key_rotation.py::TestAPIKeyRotatorEdgeCases::test_partial_rotation_recovery
ERROR tests/unit/test_key_rotation.py::TestAPIKeyRotatorEdgeCases::test_corrupted_backup_handling
ERROR tests/unit/test_mcp_server.py::TestMCPServerUtilities::test_server_startup_and_shutdown
ERROR tests/unit/test_mcp_server.py::TestMCPServerIntegration::test_full_command_workflow
ERROR tests/unit/test_mcp_server.py::TestMCPServerIntegration::test_error_propagation_in_workflow
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_retrieve_api_key_success
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_delete_api_key_not_found
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_encryption_decryption_roundtrip
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManagerEdgeCases::test_file_permission_errors
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_master_key_validation
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_manager_uses_environment_master_key
ERROR tests/unit/test_key_rotation.py::TestAPIKeyRotatorEdgeCases::test_concurrent_rotation_prevention
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManager::test_concurrent_access_safety
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManagerEdgeCases::test_memory_pressure_handling
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_manager_generates_master_key_when_missing
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_encrypt_api_key_stores_encrypted_data
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_rotate_api_key_creates_new_key
ERROR tests/unit/test_secure_api_key_manager.py::TestSecureAPIKeyManagerEdgeCases::test_disk_space_full_simulation
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_export_keys_for_backup_without_keys
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerTDD::test_cleanup_expired_keys_removes_old_keys
ERROR tests/unit/test_secure_api_key_manager_tdd.py::TestSecureAPIKeyManagerEdgeCases::test_extremely_long_api_key
ERROR tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_configuration_security
ERROR tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_input_validation_failures
ERROR tests/unit/test_security_audit.py::TestSecurityAuditorEdgeCases::test_large_file_handling
ERROR tests/unit/test_security_audit.py::TestSecurityAuditorEdgeCases::test_file_permission_errors
ERROR tests/unit/test_security_audit.py::TestSecurityAuditor::test_initialization_success
ERROR tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_injection_prevention
ERROR tests/unit/test_security_audit.py::TestSecurityAuditorEdgeCases::test_concurrent_audit_execution
ERROR tests/unit/test_simplify_commands.py::TestCommandSimplifierUtilities::test_file_extension_handling
ERROR tests/unit/test_security_audit.py::TestSecurityAuditorEdgeCases::test_malformed_configuration_files
ERROR tests/unit/test_simplify_commands.py::TestCommandSimplifierUtilities::test_circular_component_detection
ERROR tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_logging_security
ERROR tests/unit/test_security_audit.py::TestSecurityAuditorIntegration::test_full_audit_workflow
ERROR tests/unit/test_simplify_commands.py::TestCommandSimplifierUtilities::test_memory_efficient_processing
ERROR tests/unit/test_security_audit.py::TestSecurityAuditor::test_check_dependencies_vulnerabilities
ERROR tests/unit/test_simplify_commands.py::TestCommandSimplifierUtilities::test_concurrent_processing_safety
ERROR tests/unit/test_security_audit.py::TestSecurityAuditorIntegration::test_audit_with_real_security_issues
============= 72 failed, 90 passed, 3 skipped, 38 errors in 2.62s ==============
