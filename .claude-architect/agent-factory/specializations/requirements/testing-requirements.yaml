# Testing Agent Activation Requirements
# Claude Context Architect - Agent Factory Specializations
# Purpose: Define when and how to activate the Testing Agent

metadata:
  agent_name: "Testing Agent"
  version: "1.0"
  activation_scope: "Test creation, TDD enforcement, and quality assurance"
  priority_level: "critical"
  activation_confidence_threshold: "85%"

# =============================================================================
# ACTIVATION TRIGGERS
# =============================================================================

primary_activation_triggers:
  
  code_quality_indicators:
    low_test_coverage:
      - "Overall test coverage <70%"
      - "Critical business logic uncovered by tests"
      - "New features without corresponding tests"
      - "Integration points lacking test coverage"
      - "Error handling and edge cases untested"
    
    quality_issues:
      - "High defect rate in production (>5 bugs/sprint)"
      - "Frequent regression issues after deployments"
      - "Manual testing bottlenecks in development process"
      - "Quality gates missing or ineffective"
      - "Code review process lacks testing focus"
    
    tdd_violations:
      - "Implementation without tests detected"
      - "Tests written after implementation (not test-first)"
      - "Non-TDD development practices identified"
      - "Code deletion penalty triggers required"
      - "TDD compliance below acceptable threshold (<80%)"
  
  project_characteristics:
    critical_systems:
      - "Business-critical applications or services"
      - "Financial, healthcare, or safety-critical domains"
      - "High-availability requirements (>99.9%)"
      - "Compliance and regulatory requirements"
      - "Large user base or high-impact systems"
    
    complexity_factors:
      - "Complex business logic and algorithms"
      - "Multiple integration points and dependencies"
      - "Distributed system architecture"
      - "Performance-critical applications"
      - "Security-sensitive implementations"
  
  user_requests:
    explicit_testing_requests:
      - "Test coverage analysis and improvement"
      - "TDD implementation and enforcement"
      - "Quality assurance process establishment"
      - "Test automation and CI/CD integration"
      - "Testing strategy and framework evaluation"
    
    quality_improvement_requests:
      - "Bug reduction and quality improvement initiatives"
      - "Development velocity optimization"
      - "Code confidence and maintainability improvement"
      - "Release quality and reliability enhancement"

# =============================================================================
# PROJECT ANALYSIS CRITERIA
# =============================================================================

project_analysis_framework:
  
  test_coverage_assessment:
    coverage_metrics:
      statement_coverage:
        - "Line/statement coverage measurement"
        - "Critical path coverage analysis"
        - "Business logic coverage assessment"
        - "Error handling coverage evaluation"
      
      functional_coverage:
        - "Feature and use case coverage"
        - "Integration point coverage"
        - "End-to-end workflow coverage"
        - "Edge case and boundary condition coverage"
      
      coverage_gaps:
        - "Untested code identification and prioritization"
        - "High-risk areas lacking coverage"
        - "Complex algorithms without adequate tests"
        - "Integration points missing validation"
  
  test_quality_evaluation:
    existing_tests:
      test_effectiveness:
        - "Test failure rate and reliability"
        - "Test maintenance overhead and complexity"
        - "Test execution time and performance"
        - "Test code quality and readability"
      
      testing_patterns:
        - "Unit vs integration vs e2e test distribution"
        - "Mock usage and test isolation effectiveness"
        - "Test data management and maintenance"
        - "Assertion quality and comprehensiveness"
    
    testing_infrastructure:
      - "Test framework selection and optimization"
      - "CI/CD pipeline integration and automation"
      - "Test environment management and consistency"
      - "Test reporting and analytics capabilities"
  
  development_process_analysis:
    tdd_compliance:
      - "Test-first development practices adoption"
      - "Red-Green-Refactor cycle adherence"
      - "Code-test co-evolution tracking"
      - "TDD training and team capability assessment"
    
    quality_gates:
      - "Pre-commit testing requirements"
      - "Code review testing standards"
      - "Deployment testing validation"
      - "Quality metrics and threshold enforcement"

# =============================================================================
# CONTEXT REQUIREMENTS
# =============================================================================

minimum_context_requirements:
  
  required_context_layers:
    layer_2_technical_architecture:
      criticality: "essential"
      minimum_completeness: "85%"
      required_sections:
        - "Technology stack and testing framework compatibility"
        - "Application architecture and component boundaries"
        - "Build system and development environment configuration"
        - "CI/CD pipeline and deployment process details"
    
    layer_3_domain_knowledge:
      criticality: "essential"
      minimum_completeness: "80%"
      required_sections:
        - "Business rules and validation requirements"
        - "Domain model and entity relationships"
        - "User scenarios and acceptance criteria"
        - "Data integrity and consistency requirements"
    
    layer_4_team_workflows:
      criticality: "critical"
      minimum_completeness: "90%"
      required_sections:
        - "Current testing practices and standards"
        - "Code review process and quality gates"
        - "Development workflow and branching strategy"
        - "Team expertise and testing tool preferences"
  
  context_validation_criteria:
    technical_accuracy:
      - "Testing framework and tool compatibility verified"
      - "Build and deployment process details accurate"
      - "Development environment setup confirmed"
      - "Integration point documentation current"
    
    business_alignment:
      - "Business requirements mapped to test requirements"
      - "Critical user journeys identified and documented"
      - "Risk areas and quality priorities understood"
      - "Performance and scalability requirements clear"

# =============================================================================
# TDD ENFORCEMENT REQUIREMENTS
# =============================================================================

tdd_enforcement_criteria:
  
  strict_enforcement_triggers:
    code_without_tests:
      - "New implementation without corresponding tests"
      - "Modified code without test updates"
      - "Features developed without test-first approach"
      - "Refactoring without test coverage validation"
    
    enforcement_mechanisms:
      code_deletion_penalty:
        - "Immediate deletion of non-TDD implementations"
        - "Zero tolerance for test-after development"
        - "Restart requirement with proper TDD cycle"
        - "No exceptions policy for TDD violations"
    
    validation_requirements:
      red_phase_validation:
        - "Tests must fail before implementation begins"
        - "Test failures must be for expected reasons"
        - "Test coverage must address all requirements"
        - "Test quality must meet established standards"
      
      green_phase_validation:
        - "Minimal implementation approach required"
        - "All tests must pass after implementation"
        - "Implementation must meet test requirements fully"
        - "No over-implementation beyond test requirements"
      
      refactor_phase_validation:
        - "Test coverage maintained during refactoring"
        - "All tests continue to pass after changes"
        - "Code quality improved without breaking functionality"
        - "Performance and maintainability enhanced"
  
  tdd_compliance_monitoring:
    metrics_tracking:
      - "TDD cycle adherence rate measurement"
      - "Test-first vs test-after development tracking"
      - "Code deletion penalty frequency monitoring"
      - "Team TDD adoption and improvement metrics"
    
    quality_validation:
      - "Test quality and effectiveness assessment"
      - "Coverage improvement through TDD validation"
      - "Bug reduction correlation with TDD practices"
      - "Development velocity impact measurement"

# =============================================================================
# ACTIVATION CONDITIONS
# =============================================================================

activation_decision_matrix:
  
  critical_priority_activation:
    conditions:
      - "Test coverage below critical threshold (<60%)"
      - "TDD violations detected and enforcement required"
      - "Production quality issues requiring immediate attention"
      - "Critical system or high-risk application"
      - "Explicit user request for testing implementation"
    
    confidence_threshold: "≥95%"
    immediate_activation: true
    resource_priority: "critical"
    tdd_enforcement: "strict"
  
  high_priority_activation:
    conditions:
      - "Test coverage below target threshold (60-80%)"
      - "Quality improvement opportunities identified"
      - "Testing strategy evaluation and optimization needed"
      - "CI/CD integration and automation required"
      - "Team TDD training and implementation needed"
    
    confidence_threshold: "≥85%"
    immediate_activation: true
    resource_priority: "high"
    tdd_enforcement: "standard"
  
  medium_priority_activation:
    conditions:
      - "Test coverage adequate but improvement beneficial (80-90%)"
      - "Testing process optimization opportunities"
      - "Advanced testing techniques implementation"
      - "Performance or security testing enhancement"
      - "Testing documentation and training needs"
    
    confidence_threshold: "≥75%"
    immediate_activation: false
    resource_priority: "medium"
    tdd_enforcement: "advisory"

# =============================================================================
# USER PREFERENCE INTEGRATION
# =============================================================================

user_preference_framework:
  
  testing_approach_preferences:
    strict_tdd_enforcement:
      - "User commits to rigorous TDD practices"
      - "Code deletion penalty acceptance confirmed"
      - "Team training and adoption support requested"
      - "Long-term quality improvement priority"
    
    pragmatic_testing:
      - "Balanced approach between quality and velocity"
      - "Focus on critical path and high-risk area testing"
      - "Incremental testing improvement strategy"
      - "Team capability and constraint consideration"
    
    minimal_testing:
      - "Basic test coverage for critical functionality"
      - "Simple testing framework and processes"
      - "Limited complexity and maintenance overhead"
      - "Fast implementation and quick wins focus"
  
  team_capability_assessment:
    testing_expertise_level:
      high_expertise:
        - "Experienced team with strong testing background"
        - "Advanced testing patterns and techniques adoption"
        - "Complex testing scenarios and edge case coverage"
        - "Testing tool optimization and automation"
      
      moderate_expertise:
        - "Some testing experience with learning opportunities"
        - "Standard testing practices and framework usage"
        - "Guided implementation with best practice adoption"
        - "Training and skill development support"
      
      limited_expertise:
        - "Minimal testing experience requiring significant guidance"
        - "Simple testing approaches and tools"
        - "Extensive training and mentoring needs"
        - "Gradual capability building and confidence development"

# =============================================================================
# QUALITY GATE INTEGRATION
# =============================================================================

quality_gate_requirements:
  
  pre_commit_gates:
    minimum_requirements:
      - "Test coverage threshold enforcement (configurable)"
      - "All tests must pass before commit acceptance"
      - "New code must include corresponding tests"
      - "Test quality standards validation"
    
    tdd_compliance_gates:
      - "TDD cycle adherence verification"
      - "Test-first development validation"
      - "Code deletion penalty enforcement"
      - "TDD process compliance reporting"
  
  ci_cd_integration:
    automated_testing:
      - "Full test suite execution on code changes"
      - "Parallel test execution for faster feedback"
      - "Test result reporting and notification"
      - "Failed build prevention for test failures"
    
    quality_metrics:
      - "Coverage trend monitoring and alerting"
      - "Test performance and execution time tracking"
      - "Quality gate compliance reporting"
      - "Testing effectiveness measurement"
  
  release_gates:
    release_readiness:
      - "Comprehensive test coverage validation"
      - "Critical path and integration test success"
      - "Performance and load testing completion"
      - "Security and compliance testing validation"

# =============================================================================
# INTEGRATION WITH OTHER AGENTS
# =============================================================================

inter_agent_coordination:
  
  prerequisite_agents:
    code_generation_agent:
      - "Code available for testing (parallel development supported)"
      - "Implementation patterns available for test design"
      - "Integration points defined for test coverage"
  
  complementary_agents:
    debugging_agent:
      - "Test failure investigation and resolution"
      - "Root cause analysis for testing issues"
      - "Performance testing bottleneck identification"
    
    review_agent:
      - "Test code quality and standards review"
      - "Testing strategy and approach validation"
      - "Code review integration with testing requirements"
    
    architecture_agent:
      - "Testability considerations in architectural decisions"
      - "Testing strategy alignment with system architecture"
      - "Integration testing approach coordination"
  
  successor_agents:
    quality_assurance_agents:
      - "Performance Agent for performance testing"
      - "Security Agent for security testing"
      - "Documentation Agent for testing documentation"

# =============================================================================
# SUCCESS METRICS
# =============================================================================

activation_success_metrics:
  
  testing_effectiveness:
    coverage_improvement:
      target: ">20% increase over baseline"
      measurement: "Test coverage improvement after Testing Agent activation"
      validation_method: "Automated coverage analysis and reporting"
    
    defect_reduction:
      target: ">40% reduction in production defects"
      measurement: "Bug rate decrease after comprehensive testing implementation"
      validation_method: "Defect tracking and trend analysis"
    
    tdd_adoption:
      target: ">80% TDD compliance"
      measurement: "Percentage of code developed using TDD practices"
      validation_method: "Development process tracking and validation"
  
  process_efficiency:
    test_automation:
      target: ">90% automated test execution"
      measurement: "Percentage of tests automated in CI/CD pipeline"
      validation_method: "CI/CD integration and automation tracking"
    
    feedback_speed:
      target: "<5 minutes for test feedback"
      measurement: "Time from code commit to test results"
      validation_method: "CI/CD pipeline performance monitoring"
  
  team_adoption:
    testing_culture:
      target: ">85% team satisfaction with testing processes"
      measurement: "Developer feedback on testing practices and tools"
      validation_method: "Team surveys and feedback collection"
    
    skill_development:
      target: ">70% improvement in team testing capabilities"
      measurement: "Testing skill and knowledge improvement"
      validation_method: "Training assessment and capability evaluation"

# =============================================================================
# END OF TESTING AGENT ACTIVATION REQUIREMENTS
# =============================================================================