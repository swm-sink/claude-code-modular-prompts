# Progress Tracking System - Deep Discovery Consultation
# Comprehensive progress monitoring for 30-60 minute consultation sessions  
# Purpose: Track completion, time, quality, and provide user feedback
# Version: 1.0 - Production Progress Management

# =============================================================================
# PROGRESS TRACKING ARCHITECTURE
# =============================================================================
progress_tracking:
  version: "1.0"
  tracking_scope: "comprehensive_consultation_monitoring"
  update_frequency: "real_time"
  persistence: "session_state_integrated"
  
  design_principles:
    transparency: "Users always know where they are and where they're going"
    granularity: "Track at question, category, stage, and overall levels"
    predictability: "Accurate time estimates and completion forecasting"
    motivation: "Show value accumulation and progress momentum"
    flexibility: "Support different consultation paces and patterns"

# =============================================================================
# STAGE-LEVEL PROGRESS TRACKING
# =============================================================================
stage_progress:
  # ---------------------------------------------------------------------------
  # Stage 1: Project Discovery (Target: 5-7 minutes)
  # ---------------------------------------------------------------------------
  stage_1_discovery:
    target_metrics:
      target_duration_min: 5
      target_duration_max: 7
      target_duration_optimal: 6
      essential_questions_min: 6
      standard_questions_target: 12
      deep_questions_max: 18
      
    completion_criteria:
      essential_completion:
        - "project_type_identified"
        - "team_size_established"
        - "primary_domain_understood"
        - "development_stage_known"
        - "main_goal_articulated"
        
      standard_completion:
        - "All essential criteria met"
        - "claude_integration_motivation_clear"
        - "current_challenges_documented"
        - "expertise_level_calibrated"
        
      comprehensive_completion:
        - "All standard criteria met"
        - "success_vision_articulated"
        - "detailed_context_understanding"
        - "user_communication_style_established"
    
    progress_calculation:
      weight_essential: 0.7      # 70% weight for essential questions
      weight_recommended: 0.25   # 25% weight for recommended questions
      weight_optional: 0.05      # 5% weight for optional questions
      
    quality_indicators:
      high_quality_session:
        - "confidence_score >= 0.8"
        - "response_depth == 'detailed'"
        - "user_engagement == 'high'"
        - "zero_major_gaps"
        
      medium_quality_session:
        - "confidence_score >= 0.6"
        - "response_depth >= 'standard'"
        - "user_engagement >= 'medium'"
        - "minor_gaps_acceptable"
        
      requires_improvement:
        - "confidence_score < 0.6"
        - "response_depth == 'brief'"
        - "user_engagement == 'low'"
        - "major_gaps_identified"

  # ---------------------------------------------------------------------------
  # Stage 2: Technical Deep Dive (Target: 7-10 minutes)
  # ---------------------------------------------------------------------------
  stage_2_technical:
    target_metrics:
      target_duration_min: 7
      target_duration_max: 10
      target_duration_optimal: 8
      essential_questions_min: 8
      standard_questions_target: 15
      deep_questions_max: 22
      
    completion_criteria:
      essential_completion:
        - "architecture_pattern_identified"
        - "primary_tech_stack_documented"
        - "framework_choices_understood"
        - "data_storage_approach_known"
        - "testing_strategy_established"
        
      standard_completion:
        - "All essential criteria met"
        - "development_workflow_mapped"
        - "deployment_approach_documented"
        - "performance_requirements_understood"
        
      comprehensive_completion:
        - "All standard criteria met"
        - "framework_specific_patterns_captured"
        - "integration_patterns_documented"
        - "scalability_considerations_noted"
    
    progress_calculation:
      weight_architecture: 0.4    # 40% weight for architecture understanding
      weight_workflow: 0.3        # 30% weight for development workflow
      weight_performance: 0.2     # 20% weight for performance considerations
      weight_tools: 0.1           # 10% weight for tools and environment
      
    quality_indicators:
      high_quality_session:
        - "technical_confidence >= 0.85"
        - "architecture_clarity == 'clear'"
        - "workflow_documentation == 'comprehensive'"
        - "framework_expertise_evident"
        
      medium_quality_session:
        - "technical_confidence >= 0.65"
        - "architecture_clarity >= 'adequate'"
        - "workflow_documentation >= 'standard'"
        
      requires_improvement:
        - "technical_confidence < 0.65"
        - "architecture_clarity == 'unclear'"
        - "significant_technical_gaps"

  # ---------------------------------------------------------------------------
  # Stage 3: Domain Extraction (Target: 7-10 minutes)
  # ---------------------------------------------------------------------------
  stage_3_domain:
    target_metrics:
      target_duration_min: 7
      target_duration_max: 10
      target_duration_optimal: 8
      essential_questions_min: 6
      standard_questions_target: 12
      deep_questions_max: 18
      
    completion_criteria:
      essential_completion:
        - "core_business_entities_identified"
        - "domain_terminology_captured"
        - "primary_workflows_mapped"
        - "user_journey_patterns_understood"
        
      standard_completion:
        - "All essential criteria met"
        - "business_rules_documented"
        - "integration_patterns_identified"
        - "data_relationships_mapped"
        
      comprehensive_completion:
        - "All standard criteria met"
        - "compliance_requirements_noted"
        - "complex_workflows_detailed"
        - "domain_expertise_captured"
    
    progress_calculation:
      weight_entities: 0.3        # 30% weight for business entities
      weight_workflows: 0.3       # 30% weight for workflows
      weight_terminology: 0.2     # 20% weight for terminology
      weight_rules: 0.2           # 20% weight for business rules
      
    quality_indicators:
      high_quality_session:
        - "domain_confidence >= 0.8"
        - "business_understanding == 'comprehensive'"
        - "workflow_clarity == 'detailed'"
        - "terminology_richness == 'extensive'"
        
      medium_quality_session:
        - "domain_confidence >= 0.6"
        - "business_understanding >= 'adequate'"
        - "workflow_clarity >= 'basic'"
        
      requires_improvement:
        - "domain_confidence < 0.6"
        - "business_understanding == 'limited'"
        - "major_domain_gaps_present"

  # ---------------------------------------------------------------------------
  # Stage 4: Preference Learning (Target: 3-5 minutes)
  # ---------------------------------------------------------------------------
  stage_4_preferences:
    target_metrics:
      target_duration_min: 3
      target_duration_max: 5
      target_duration_optimal: 4
      essential_questions_min: 4
      standard_questions_target: 8
      deep_questions_max: 12
      
    completion_criteria:
      essential_completion:
        - "coding_standards_established"
        - "communication_style_preferences_set"
        - "documentation_level_determined"
        - "tool_preferences_noted"
        
      standard_completion:
        - "All essential criteria met"
        - "workflow_rhythm_understood"
        - "feedback_preferences_established"
        - "command_structure_preferences_noted"
        
      comprehensive_completion:
        - "All standard criteria met"
        - "team_conventions_documented"
        - "learning_preferences_established"
        - "optimization_priorities_clear"
    
    progress_calculation:
      weight_coding_standards: 0.4  # 40% weight for coding standards
      weight_communication: 0.3     # 30% weight for communication style
      weight_workflow: 0.2           # 20% weight for workflow preferences
      weight_tools: 0.1              # 10% weight for tool preferences
      
    quality_indicators:
      high_quality_session:
        - "preference_confidence >= 0.85"
        - "style_clarity == 'specific'"
        - "preferences_consistency == 'high'"
        
      medium_quality_session:
        - "preference_confidence >= 0.65"
        - "style_clarity >= 'general'"
        - "preferences_consistency >= 'medium'"
        
      requires_improvement:
        - "preference_confidence < 0.65"
        - "style_clarity == 'vague'"
        - "preference_gaps_significant"

# =============================================================================
# OVERALL CONSULTATION PROGRESS
# =============================================================================
overall_progress:
  # ---------------------------------------------------------------------------
  # Total Consultation Metrics
  # ---------------------------------------------------------------------------
  consultation_completion:
    calculation_method: "weighted_stage_completion"
    stage_weights:
      stage_1_weight: 0.35    # 35% - Foundation is critical
      stage_2_weight: 0.35    # 35% - Technical understanding essential
      stage_3_weight: 0.25    # 25% - Domain knowledge important
      stage_4_weight: 0.05    # 5% - Preferences nice-to-have
      
    milestone_progression:
      milestone_25_percent:
        - "Stage 1 essential completion"
        - "Project foundation established"
        - "Communication style calibrated"
        
      milestone_50_percent:
        - "Stage 1 comprehensive completion"
        - "Stage 2 essential completion started"
        - "Technical understanding developing"
        
      milestone_75_percent:
        - "Stage 2 comprehensive completion"
        - "Stage 3 essential completion"
        - "Domain expertise emerging"
        
      milestone_100_percent:
        - "All stages essential completion"
        - "High confidence across all areas"
        - "Ready for context generation"
  
  # ---------------------------------------------------------------------------
  # Quality Score Calculation
  # ---------------------------------------------------------------------------
  quality_scoring:
    overall_quality_formula:
      base_score: "average(stage_confidence_scores)"
      completeness_bonus: "0.1 * completeness_percentage"
      consistency_bonus: "0.05 * consistency_score"
      engagement_bonus: "0.05 * engagement_score"
      
    quality_categories:
      exceptional_quality:    # 90-100%
        description: "Comprehensive understanding with high confidence"
        characteristics:
          - "All essential and most recommended information captured"
          - "High confidence scores across all stages"
          - "Strong user engagement throughout"
          - "Minimal information gaps"
          - "Consistent responses"
        
      high_quality:          # 75-89%
        description: "Strong understanding with good confidence"
        characteristics:
          - "All essential information captured"
          - "Good confidence in most areas"
          - "Adequate user engagement"
          - "Minor information gaps acceptable"
        
      adequate_quality:      # 60-74%
        description: "Sufficient understanding for basic context generation"
        characteristics:
          - "Most essential information captured"
          - "Moderate confidence levels"
          - "Some information gaps present"
          - "Basic context generation possible"
        
      needs_improvement:     # Below 60%
        description: "Insufficient understanding for effective context generation"
        characteristics:
          - "Major information gaps"
          - "Low confidence scores"
          - "Context generation not recommended"
          - "Additional consultation needed"

# =============================================================================
# TIME PROGRESS TRACKING
# =============================================================================
time_progress:
  # ---------------------------------------------------------------------------
  # Time Calculation Methods
  # ---------------------------------------------------------------------------
  elapsed_time_tracking:
    measurement_unit: "minutes"
    precision: "30_seconds"
    tracking_granularity:
      - "overall_consultation_time"
      - "current_stage_time"
      - "time_per_question_category"
      - "inactive_time_detection"
    
  time_estimation:
    remaining_time_calculation:
      method: "adaptive_estimation"
      factors:
        current_pace: 0.4        # 40% weight for current pace
        stage_complexity: 0.3    # 30% weight for upcoming stage complexity  
        user_engagement: 0.2     # 20% weight for user engagement level
        historical_average: 0.1  # 10% weight for typical completion times
    
    pace_analysis:
      ahead_of_schedule:
        threshold: "more_than_3_minutes_under_target"
        implications:
          - "Can add depth questions"
          - "Opportunity for comprehensive exploration"
          - "User likely engaged and detailed"
        
      on_schedule:
        threshold: "within_2_minutes_of_target"
        implications:
          - "Maintain standard question flow"
          - "Proceed with planned depth"
          - "Monitor for schedule adherence"
        
      behind_schedule:
        threshold: "more_than_3_minutes_over_target"
        implications:
          - "Switch to essential questions only"
          - "Consider quick mode transition"
          - "Focus on must-have information"
        
      significantly_behind:
        threshold: "more_than_8_minutes_over_total_target"
        implications:
          - "Activate emergency quick mode"
          - "Skip all non-essential questions"
          - "Prioritize completion over comprehensiveness"

# =============================================================================
# VISUAL PROGRESS REPRESENTATION
# =============================================================================
visual_progress:
  # ---------------------------------------------------------------------------
  # Progress Bar Formats
  # ---------------------------------------------------------------------------
  progress_display_formats:
    compact_format:
      example: "Stage 2/4 (65%) [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 18/30 min"
      components:
        - "Current stage and total stages"
        - "Overall completion percentage"
        - "Visual progress bar"
        - "Time elapsed and total target"
        
    detailed_format:
      example: |
        Deep Discovery Consultation Progress:
        
        âœ… Stage 1: Project Discovery (100%) - 8 min [COMPLETE]
        ðŸ”„ Stage 2: Technical Deep Dive (65%) - 7 min [IN PROGRESS]
           â””â”€â”€ Architecture: âœ… | Workflow: ðŸ”„ | Performance: â³
        â³ Stage 3: Domain Extraction (0%) - 0 min [PENDING]
        â³ Stage 4: Preference Learning (0%) - 0 min [PENDING]
        
        Overall: 51% complete | Quality Score: 82% | Est. 12 min remaining
        
    minimalist_format:
      example: "2/4 (51%) â€¢ 15/30min â€¢ High Quality"
      components:
        - "Stage progress"
        - "Overall completion"
        - "Time progress"
        - "Quality indicator"
  
  # ---------------------------------------------------------------------------
  # Stage-Specific Progress Indicators
  # ---------------------------------------------------------------------------
  stage_progress_indicators:
    stage_1_indicators:
      icons:
        not_started: "â³"
        in_progress: "ðŸ”"
        completed: "âœ…"
        high_quality: "ðŸŒŸ"
      
      progress_elements:
        project_type: "ðŸ—ï¸"
        team_size: "ðŸ‘¥" 
        domain: "ðŸŽ¯"
        goals: "ðŸš€"
        challenges: "âš¡"
        
    stage_2_indicators:
      icons:
        not_started: "â³"
        in_progress: "âš™ï¸"
        completed: "âœ…"
        high_quality: "ðŸ”§"
      
      progress_elements:
        architecture: "ðŸ›ï¸"
        frameworks: "ðŸ› ï¸"
        workflow: "ðŸ”„"
        testing: "ðŸ§ª"
        deployment: "ðŸš€"
        
    stage_3_indicators:
      icons:
        not_started: "â³"
        in_progress: "ðŸ’¼"
        completed: "âœ…"
        high_quality: "ðŸ“Š"
      
      progress_elements:
        entities: "ðŸ“‹"
        workflows: "ðŸ”„"
        terminology: "ðŸ“š"
        rules: "ðŸ“"
        integrations: "ðŸ”—"
        
    stage_4_indicators:
      icons:
        not_started: "â³"
        in_progress: "âš™ï¸"
        completed: "âœ…"
        high_quality: "âœ¨"
      
      progress_elements:
        standards: "ðŸ“"
        style: "ðŸŽ¨"
        tools: "ðŸ”§"
        communication: "ðŸ’¬"
        workflow: "âš¡"

# =============================================================================
# PROGRESS REPORTING SYSTEM
# =============================================================================
progress_reporting:
  # ---------------------------------------------------------------------------
  # Real-Time Updates
  # ---------------------------------------------------------------------------
  update_triggers:
    automatic_updates:
      - "question_completion"
      - "category_completion" 
      - "stage_transition"
      - "5_minute_intervals"
      - "confidence_score_changes"
      
    user_requested_updates:
      - "progress_command_invocation"
      - "status_check_request"
      - "session_pause_request"
      - "session_resume_action"
  
  update_content:
    minimal_update:
      - "Current stage and question"
      - "Overall completion percentage"
      - "Elapsed time"
      
    standard_update:
      - "All minimal update information"
      - "Current stage progress breakdown"
      - "Quality score indication"
      - "Estimated time remaining"
      
    comprehensive_update:
      - "All standard update information"
      - "Detailed stage-by-stage progress"
      - "Information gap analysis"
      - "Confidence score breakdown"
      - "Session quality assessment"
  
  # ---------------------------------------------------------------------------
  # Progress Summaries
  # ---------------------------------------------------------------------------
  summary_generation:
    stage_completion_summary:
      template: |
        ðŸŽ‰ Stage {stage_number}: {stage_name} Complete!
        
        âœ… Accomplished:
        {accomplishments_list}
        
        ðŸ“Š Results:
        â€¢ Questions answered: {questions_answered}
        â€¢ Time spent: {time_spent} minutes
        â€¢ Confidence score: {confidence_score}%
        â€¢ Quality rating: {quality_rating}
        
        ðŸ”„ Next: {next_stage_preview}
        
    consultation_progress_summary:
      template: |
        ðŸ“ˆ Consultation Progress Update
        
        Overall: {overall_percentage}% complete
        Quality Score: {quality_score}% ({quality_rating})
        Time: {elapsed_time}/{target_time} minutes
        
        ðŸ“Š Stage Progress:
        {stage_progress_details}
        
        â±ï¸ Estimated remaining: {estimated_remaining} minutes
        ðŸŽ¯ On track for: {completion_prediction}
        
    session_pause_summary:
      template: |
        â¸ï¸ Session Paused - Progress Saved
        
        Current Position: Stage {stage_number}, Question {question_number}
        Progress: {overall_percentage}% complete
        Time Invested: {elapsed_time} minutes
        Quality So Far: {quality_score}% ({quality_rating})
        
        When you resume:
        â€¢ We'll continue from: {resume_point}
        â€¢ Estimated time to completion: {estimated_remaining} minutes
        â€¢ Next focus area: {next_area}
        
        Session ID: {session_id}

# =============================================================================
# PROGRESS-BASED ADAPTATIONS
# =============================================================================
progress_adaptations:
  # ---------------------------------------------------------------------------
  # Pace-Based Adjustments
  # ---------------------------------------------------------------------------
  pace_adaptations:
    ahead_of_schedule:
      triggers:
        - "stage_completed_under_minimum_time"
        - "high_user_engagement"
        - "detailed_responses_received"
        
      adaptations:
        - "enable_deep_mode_questions"
        - "add_optional_exploration_topics"
        - "increase_follow_up_depth"
        - "allow_tangential_discussions"
        
    behind_schedule:
      triggers:
        - "stage_exceeded_maximum_time"
        - "low_user_engagement"
        - "approaching_total_time_limit"
        
      adaptations:
        - "switch_to_quick_mode"
        - "skip_non_essential_questions"
        - "reduce_follow_up_depth"
        - "focus_on_must_have_information"
  
  # ---------------------------------------------------------------------------
  # Quality-Based Adjustments
  # ---------------------------------------------------------------------------
  quality_adaptations:
    low_confidence_detected:
      triggers:
        - "confidence_score_below_threshold"
        - "inconsistent_responses"
        - "major_information_gaps"
        
      adaptations:
        - "add_clarification_questions"
        - "provide_examples_for_context"
        - "revisit_unclear_responses"
        - "increase_validation_checkpoints"
        
    high_confidence_achieved:
      triggers:
        - "confidence_score_above_threshold"
        - "consistent_detailed_responses"
        - "comprehensive_information_captured"
        
      adaptations:
        - "reduce_redundant_questions"
        - "enable_advanced_topics"
        - "accelerate_through_obvious_areas"
        - "focus_on_optimization_opportunities"

This comprehensive progress tracking system provides real-time monitoring, visual feedback, and intelligent adaptations to ensure users always know where they are in the consultation and feel motivated to continue through the complete 30-60 minute deep discovery process.