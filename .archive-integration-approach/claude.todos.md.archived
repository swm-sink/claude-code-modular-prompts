# Claude Context Architect - Orchestration Command Center
<!-- 
  MANDATORY: This file is the SINGLE SOURCE OF TRUTH for all orchestration.
  Every agent MUST read this file first and update it atomically.
  Version: 1.0
  Last Updated: 2025-08-05
-->

## üö® MANDATORY ENFORCEMENT RULES

**ALL AGENTS MUST:**
1. **READ THIS FILE FIRST** - Before any task execution
2. **CLAIM TASKS ATOMICALLY** - Update status with agent ID
3. **UPDATE PROGRESS** - Every significant milestone
4. **DOCUMENT OUTCOMES** - Files created/modified
5. **REPORT FAILURES** - With detailed context
6. **HANDOFF PROPERLY** - Leave context for next agent

**ENFORCEMENT IN CLAUDE.md:**
```yaml
enforcement:
  - claude.todos.md is the SINGLE SOURCE OF TRUTH
  - No work without reading this file first
  - No task completion without updating this file
  - Violations result in work rejection
  - All agents must follow coordination protocols
```

## üìä ORCHESTRATION STATE

### Current Status
```yaml
orchestration:
  status: ACTIVE
  phase: 1_archive_and_isolate
  started: 2025-08-05
  
progress:
  total_tasks: 104
  completed: 6
  in_progress: 0
  failed: 0
  blocked: 0
  
confidence:
  level: 0.8  # High from successful Tasks 1-6
  trend: increasing
  
last_checkpoint:
  task: 6
  timestamp: 2025-08-05T21:02:00Z
  commit: "19bd5b9"
```

### Active Agents
```yaml
agents:
  orchestrator:
    id: "master"
    status: "monitoring"
    
  pool_1_archival:
    agents: []  # Not yet spawned
    
  pool_2_builders:
    agents: []  # Waiting for Phase 3
    
  pool_3_updaters:
    agents: []  # Waiting for Phase 2
```

## üéØ PHASE 1: Archive & Isolate Legacy Work [IN PROGRESS]

### Overview
```yaml
phase_1:
  status: IN_PROGRESS
  tasks_total: 11
  tasks_complete: 6
  estimated_time: "30 minutes remaining"
  risk_level: LOW
  parallelization: LIMITED
```

### Task Definitions

#### ‚úÖ Task 1: Create Archive Directory Structure
```yaml
task_1:
  status: COMPLETE
  completed_by: "Task-1-Agent"
  completed_at: "2025-08-05T14:34:00Z"
  
  outcome:
    created_directories:
      - .archive-integration-approach/
      - .archive-integration-approach/commands/
      - .archive-integration-approach/agents/
      - .archive-integration-approach/scripts/
      - .archive-integration-approach/tests/
    created_files:
      - .archive-integration-approach/LEARNING.md
    commit: "ff37006"
    
  validation:
    - Directory structure verified
    - LEARNING.md created
    - All tests passed
```

#### ‚úÖ Task 2: Move scripts/integrate-agents.sh
```yaml
task_2:
  status: COMPLETE
  completed_by: "Task-2-Agent"
  completed_at: "2025-08-05T14:45:00Z"
  
  outcome:
    moved_from: scripts/integrate-agents.sh
    moved_to: .archive-integration-approach/scripts/integrate-agents.sh
    file_size: 7891 bytes
    commit: "ff37006"
    
  validation:
    - Source file removed
    - Target file exists
    - Content integrity verified
```

#### ‚úÖ Task 3: Move .claude/commands/integrate-agents.md
```yaml
task_3:
  status: COMPLETE
  completed_by: "Task-3-Agent"
  completed_at: "2025-08-05T20:45:00Z"
  
  outcome:
    moved_from: .claude/commands/integrate-agents.md
    moved_to: .archive-integration-approach/commands/integrate-agents.md
    file_size: 5872 bytes
    commit: "2d6ec92"
```

#### ‚úÖ Task 4: Move .claude/agents/context-engineer.md
```yaml
task_4:
  status: COMPLETE
  completed_by: "Task-4-Agent"
  completed_at: "2025-08-05T20:52:00Z"
  
  outcome:
    moved_from: .claude/agents/context-engineer.md
    moved_to: .archive-integration-approach/agents/context-engineer.md
    file_size: 4479 bytes
    commit: "858e7f3"
```

#### ‚úÖ Task 5: Move .claude/agents/command-builder.md
```yaml
task_5:
  status: COMPLETE
  completed_by: "Task-5-Agent"
  completed_at: "2025-08-05T20:58:00Z"
  
  outcome:
    moved_from: .claude/agents/command-builder.md
    moved_to: .archive-integration-approach/agents/command-builder.md
    file_size: 2875 bytes
    commit: "350d897"
```

#### ‚úÖ Task 6: Move .claude/agents/research-validator.md
```yaml
task_6:
  status: COMPLETE
  completed_by: "Task-6-Agent"
  completed_at: "2025-08-05T21:02:00Z"
  
  outcome:
    moved_from: .claude/agents/research-validator.md
    moved_to: .archive-integration-approach/agents/research-validator.md
    file_size: 3221 bytes
    commit: "19bd5b9"
    
  milestone: "AGENT ARCHIVAL COMPLETE - .claude/agents/ now EMPTY"
```

#### ‚è≥ Task 7: Move scripts/invoke-agent.sh
```yaml
task_7:
  status: PENDING
  priority: HIGH
  assigned_to: null
  
  context:
    description: "Move scripts/invoke-agent.sh to archive"
    source_file: "scripts/invoke-agent.sh"
    target_file: ".archive-integration-approach/scripts/invoke-agent.sh"
    file_exists: true
    dependencies: []
    conflicts: []
    
  execution:
    approach: "Simple file move with validation"
    tdd_level: "lightweight"
    risk: "LOW"
    
  agent_instructions: |
    1. Verify source file exists
    2. Create lightweight TDD test
    3. Move file to archive
    4. Validate move successful
    5. Commit with message: "Task #7: Archive scripts/invoke-agent.sh - Integration‚ÜíGeneration pivot"
    6. Update this file with outcome
```

#### ‚è≥ Task 8: Move tests/test_agent_integration_system.sh
```yaml
task_8:
  status: PENDING
  priority: MEDIUM
  assigned_to: null
  can_parallel_with: [9]
  
  context:
    description: "Move integration system test to archive"
    source_file: "tests/test_agent_integration_system.sh"
    target_file: ".archive-integration-approach/tests/test_agent_integration_system.sh"
    
  execution:
    approach: "Simple file move"
    tdd_level: "lightweight"
    risk: "LOW"
```

#### ‚è≥ Task 9: Move tests/test_agent_integration_e2e.sh
```yaml
task_9:
  status: PENDING
  priority: MEDIUM
  assigned_to: null
  can_parallel_with: [8]
  
  context:
    description: "Move e2e integration test to archive"
    source_file: "tests/test_agent_integration_e2e.sh"
    target_file: ".archive-integration-approach/tests/test_agent_integration_e2e.sh"
    
  execution:
    approach: "Simple file move"
    tdd_level: "lightweight"
    risk: "LOW"
```

#### ‚è≥ Task 10: Create LEARNING.md Documentation
```yaml
task_10:
  status: PENDING
  priority: LOW
  assigned_to: null
  
  context:
    description: "Document why integration approach was wrong"
    target_file: ".archive-integration-approach/LEARNING.md"
    
  content_requirements:
    - Why integration failed
    - Lessons learned
    - What generation approach solves
    
  execution:
    approach: "Create comprehensive documentation"
    tdd_level: "none"
    risk: "LOW"
```

#### ‚è≥ Task 11: Update .gitignore
```yaml
task_11:
  status: PENDING
  priority: LOW
  assigned_to: null
  
  context:
    description: "Exclude archive directory from future searches"
    target_file: ".gitignore"
    
  update_required: |
    Add line: .archive-integration-approach/
    
  execution:
    approach: "Simple file append"
    tdd_level: "basic"
    risk: "LOW"
```

## üéØ PHASE 2: Core Context Realignment [PENDING]

### Overview
```yaml
phase_2:
  status: PENDING
  prerequisites: ["phase_1_complete"]
  tasks_total: 13
  tasks_complete: 0
  estimated_time: "2 hours"
  risk_level: HIGH  # CLAUDE.md updates
  parallelization: MIXED
```

### Critical Tasks Preview

#### ‚è≥ Tasks 12-19: CLAUDE.md Updates [REQUIRES APPROVAL]
```yaml
claude_md_updates:
  risk: CRITICAL
  approval_required: true
  backup_required: true
  
  updates_needed:
    task_12: "Add GENERATIVE VISION section"
    task_13: "Replace 'template library' with 'deep discovery engine'"
    task_14: "Add Deep Discovery Architecture section"
    task_15: "Add Project DNA concept"
    task_16: "Add warning against integration"
    task_17: "Update 'What This Library Provides'"
    task_18: "Fix Current Status section"
    task_19: "Update XML metadata"
    
  agent_instructions: |
    CRITICAL: Each update requires:
    1. Backup CLAUDE.md
    2. Show diff for approval
    3. Make atomic change
    4. Validate file integrity
    5. Test Claude still works
```

#### ‚è≥ Tasks 20-22: New Documentation [CAN PARALLEL]
```yaml
new_documentation:
  can_parallel: true
  risk: LOW
  
  task_20:
    file: "DEEP-DISCOVERY-ARCHITECTURE.md"
    content: "Complete technical specification"
    
  task_21:
    file: "PROJECT-DNA-SPECIFICATION.md"
    content: "Schema and examples"
    
  task_22:
    file: "GENERATION-NOT-INTEGRATION.md"
    content: "Anti-pattern documentation"
```

## üéØ PHASE 3: Build Deep Discovery Core [PENDING]

### Overview
```yaml
phase_3:
  status: PENDING
  prerequisites: ["phase_2_complete"]
  tasks_total: 27
  estimated_time: "2 hours"
  risk_level: LOW  # All new files
  parallelization: MAXIMUM
```

[Phases 3-8 structure continues with similar detail...]

## üîÑ COORDINATION PROTOCOLS

### Task Claiming Protocol
```yaml
claiming_process:
  1_check: "Read task status"
  2_verify: "Ensure status is PENDING"
  3_claim: "Update status to IN_PROGRESS with agent_id"
  4_confirm: "Re-read to verify claim succeeded"
  5_proceed: "If claimed successfully, execute task"
  6_backoff: "If claim failed, try different task"
```

### Progress Update Protocol
```yaml
update_process:
  frequency: "Every 5 minutes or major milestone"
  
  required_updates:
    - Status change (PENDING ‚Üí IN_PROGRESS ‚Üí COMPLETE)
    - Files created/modified
    - Test results
    - Validation outcomes
    - Commit hashes
    
  atomic_update:
    method: "Read-modify-write with version check"
    conflict: "Retry with exponential backoff"
```

### Failure Handling Protocol
```yaml
on_failure:
  1_stop: "Cease task execution"
  2_rollback: "Undo any partial changes"
  3_document: "Update task with failure details"
  4_status: "Set status to FAILED"
  5_blockers: "Mark dependent tasks as BLOCKED"
  6_alert: "Notify orchestrator"
```

## üìÅ FILE TRACKING

### Files Created (Phase 1)
```yaml
created_files:
  - .archive-integration-approach/LEARNING.md
  - tests/test_task_1_archive_directory.sh
  - tests/test_task_2_move_integrate_agents.sh
  - tests/test_task_3_move_integrate_agents_command.sh
  - tests/test_task_4_move_context_engineer.sh
  - tests/test_task_5_move_command_builder.sh
  - tests/test_task_6_move_research_validator.sh
```

### Files Moved (Phase 1)
```yaml
moved_files:
  - scripts/integrate-agents.sh ‚Üí .archive-integration-approach/scripts/
  - .claude/commands/integrate-agents.md ‚Üí .archive-integration-approach/commands/
  - .claude/agents/context-engineer.md ‚Üí .archive-integration-approach/agents/
  - .claude/agents/command-builder.md ‚Üí .archive-integration-approach/agents/
  - .claude/agents/research-validator.md ‚Üí .archive-integration-approach/agents/
```

### Files To Create (Phase 3)
```yaml
future_files:
  orchestrator:
    - .claude-architect/orchestrator/orchestrator.md
    - .claude-architect/orchestrator/agent-protocol.md
    - .claude-architect/orchestrator/confidence-scoring.md
    - .claude-architect/orchestrator/spawn-manager.md
    
  discovery_agents:
    - .claude-architect/discovery-agents/01-structure-scout.md
    - .claude-architect/discovery-agents/02-framework-detective.md
    [... continues for all 10 agents]
```

## üéØ SUCCESS CRITERIA

### Phase Completion Gates
```yaml
phase_1_complete:
  - All integration files archived
  - .claude/agents/ directory empty
  - Archive structure verified
  
phase_2_complete:
  - CLAUDE.md fully updated
  - New documentation created
  - Vision alignment verified
  
phase_3_complete:
  - .claude-architect/ structure built
  - All discovery agents defined
  - DNA system created
```

### Final Validation
```yaml
transformation_complete:
  - All 104 tasks COMPLETE
  - No FAILED or BLOCKED tasks
  - No integration references remain
  - All tests passing
  - Documentation complete
  - Final commit created
```

## üìä METRICS & MONITORING

### Performance Metrics
```yaml
metrics:
  average_task_time: "5 minutes"
  parallel_efficiency: "not yet measured"
  failure_rate: "0%"
  recovery_time: "not yet needed"
  
tracking:
  phase_1_start: "2025-08-05T14:30:00Z"
  phase_1_end: null
  total_duration: null
```

### Quality Metrics
```yaml
quality:
  test_coverage: "100% for moved files"
  validation_passes: "6/6 gates passed"
  rollbacks_needed: 0
  manual_interventions: 0
```

## üîÑ ORCHESTRATOR CONTEXT

### For Master Orchestrator
```yaml
orchestrator_instructions: |
  You are the Master Orchestrator for the Deep Discovery Transformation.
  
  Your responsibilities:
  1. Monitor this file for progress
  2. Spawn appropriate agents for pending tasks
  3. Handle coordination conflicts
  4. Validate phase completions
  5. Manage failure recovery
  6. Update orchestration state
  
  Current priority:
  - Complete Phase 1 (Tasks 7-11)
  - Prepare for Phase 2 CLAUDE.md updates
  - Maintain transformation momentum
```

### For Task Agents
```yaml
agent_instructions: |
  You are a specialized task agent.
  
  Your process:
  1. Read your assigned task from this file
  2. Claim the task atomically
  3. Execute according to instructions
  4. Update this file with outcomes
  5. Mark task complete
  6. Enable next tasks
  
  Remember:
  - Follow TDD if specified
  - Document all changes
  - Update file tracking
  - Report failures immediately
```

## üö® CURRENT FOCUS

**IMMEDIATE NEXT STEPS:**
1. Complete Task 7 (move invoke-agent.sh)
2. Parallel execute Tasks 8-9 (test moves)
3. Complete Tasks 10-11 (documentation)
4. Prepare for Phase 2 CLAUDE.md updates

**BLOCKED ITEMS:**
- Phase 2-8: Waiting for Phase 1 completion

**RISKS:**
- CLAUDE.md updates in Phase 2 require careful handling
- Must maintain backup before updates

---

<!-- 
  ENFORCEMENT: This file must be referenced in CLAUDE.md as mandatory.
  All agents must read and update this file.
  This is the single source of truth for orchestration.
-->